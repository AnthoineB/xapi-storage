<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>XCP Host APIs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="google-code-prettify/prettify.js"></script>

    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- FontAwesome is pretty awesome:
	 http://fortawesome.github.com/Font-Awesome -->

    <link rel="stylesheet" href="fontawesome/css/font-awesome.css">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  </head>

  <body onload="prettyPrint()">

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                    <li>
                        <a href="#a-0">
                            <i class="icon-pencil">
                                
                            </i>
                            debug_info
                        </a>
                    </li>
                    <li>
                        <a href="#a-1">
                            <i class="icon-pencil">
                                
                            </i>
                            vdi
                        </a>
                    </li>
                    <li>
                        <a href="#a-2">
                            <i class="icon-pencil">
                                
                            </i>
                            sr
                        </a>
                    </li>
                    <li>
                        <a href="#a-3">
                            <i class="icon-pencil">
                                
                            </i>
                            content_id
                        </a>
                    </li>
                    <li>
                        <a href="#a-4">
                            <i class="icon-pencil">
                                
                            </i>
                            vdi_info
                        </a>
                    </li>
                    <li>
                        <a href="#a-5">
                            <i class="icon-pencil">
                                
                            </i>
                            attach_info
                        </a>
                    </li>
                    <li>
                        <a href="#a-6">
                            <i class="icon-pencil">
                                
                            </i>
                            query_result
                        </a>
                    </li>
                    <li class="nav-header">
                        <a href="#a-Query">
                            <i class="icon-book">
                                
                            </i>
                            Query
                        </a>
                    </li>
                    <li>
                        <a href="#a-query">
                            <i class="icon-cogs">
                                
                            </i>
                            query
                        </a>
                    </li>
                    <li>
                        <a href="#a-diagnostics">
                            <i class="icon-cogs">
                                
                            </i>
                            diagnostics
                        </a>
                    </li>
                    <li class="nav-header">
                        <a href="#a-VDI">
                            <i class="icon-book">
                                
                            </i>
                            VDI
                        </a>
                    </li>
                    <li>
                        <a href="#a-create">
                            <i class="icon-cogs">
                                
                            </i>
                            create
                        </a>
                    </li>
                    <li>
                        <a href="#a-snapshot">
                            <i class="icon-cogs">
                                
                            </i>
                            snapshot
                        </a>
                    </li>
                    <li>
                        <a href="#a-clone">
                            <i class="icon-cogs">
                                
                            </i>
                            clone
                        </a>
                    </li>
                    <li>
                        <a href="#a-destroy">
                            <i class="icon-cogs">
                                
                            </i>
                            destroy
                        </a>
                    </li>
                    <li>
                        <a href="#a-stat">
                            <i class="icon-cogs">
                                
                            </i>
                            stat
                        </a>
                    </li>
                    <li>
                        <a href="#a-attach">
                            <i class="icon-cogs">
                                
                            </i>
                            attach
                        </a>
                    </li>
                    <li>
                        <a href="#a-activate">
                            <i class="icon-cogs">
                                
                            </i>
                            activate
                        </a>
                    </li>
                    <li>
                        <a href="#a-deactivate">
                            <i class="icon-cogs">
                                
                            </i>
                            deactivate
                        </a>
                    </li>
                    <li>
                        <a href="#a-detach">
                            <i class="icon-cogs">
                                
                            </i>
                            detach
                        </a>
                    </li>
                    <li>
                        <a href="#a-copy">
                            <i class="icon-cogs">
                                
                            </i>
                            copy
                        </a>
                    </li>
                    <li class="nav-header">
                        <a href="#a-SR">
                            <i class="icon-book">
                                
                            </i>
                            SR
                        </a>
                    </li>
                    <li>
                        <a href="#a-ls">
                            <i class="icon-cogs">
                                
                            </i>
                            ls
                        </a>
                    </li>
                    <li>
                        <a href="#a-create">
                            <i class="icon-cogs">
                                
                            </i>
                            create
                        </a>
                    </li>
                    <li>
                        <a href="#a-attach">
                            <i class="icon-cogs">
                                
                            </i>
                            attach
                        </a>
                    </li>
                    <li>
                        <a href="#a-detach">
                            <i class="icon-cogs">
                                
                            </i>
                            detach
                        </a>
                    </li>
                    <li>
                        <a href="#a-destroy">
                            <i class="icon-cogs">
                                
                            </i>
                            destroy
                        </a>
                    </li>
                    <li>
                        <a href="#a-scan">
                            <i class="icon-cogs">
                                
                            </i>
                            scan
                        </a>
                    </li>
                    <li class="nav-header">
                        <a href="#a-exceptions">
                            Exceptions
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="span9">
            <h1 id="a-storage">
                storage: Storage Manager
            </h1>
            <p>
                The xapi toolstack delegates all storage control-plane functions to the Storage Manager (SM). The SM organises Virtual Disk Images (VDIs) into collections known as Storage Repositories (SRs). The Storage Manager API (SMAPI) provides a simple abstract interface which allows the toolstack to create, destroy, snapshot, clone, resize etc VDIs within SRs
            </p>
            <h2 id="a-0">
                type debug_info = string
            </h2>
            <p>
                Debug context from the caller
            </p>
            <h2 id="a-1">
                type vdi = string
            </h2>
            <p>
                Primary key for a Virtual Disk Image. This can be any string which is meaningful to the implementation. For example this could be an NFS filename, an LVM LV name or even a URI.
            </p>
            <h2 id="a-2">
                type sr = string
            </h2>
            <p>
                Primary key for a specific Storage Repository. This can be any string which is meaningful to the implementation. For example this could be an NFS directory name, an LVM VG name or even a URI.
            </p>
            <h2 id="a-3">
                type content_id = string
            </h2>
            <p>
                Identifies the data contained within a VDI. This can be any string provided that, if two VDIs have the same content_id, they definitely have the same contents. This implication is one-way: if two VDIs have different content_ids then this does not imply they have different contents.
            </p>
            <h2 id="a-4">
                type vdi_info = struct  { ... }
            </h2>
            <p>
                A set of properties associated with a VDI. These properties can change dynamically and can be queried by the VDI.stat call.
            </p>
            <p>
                Members:
            </p>
            <table class="table table-striped table-condensed">
                <th>
                    <td>
                        Type
                    </td>
                    <td>
                        Description
                    </td>
                </th>
                <tr>
                    <td>
                        <code>
                            vdi
                        </code>
                    </td>
                    <td>
                        <code>
                            vdi
                        </code>
                    </td>
                    <td>
                        The unique id of this VDI. This must be unique with a Storage Repository, but may not be unique between Storage Respositories.
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            content_id
                        </code>
                    </td>
                    <td>
                        <code>
                            content_id
                        </code>
                    </td>
                    <td>
                        A repersentation of the VDI contents such that if two VDIs have the same content_id then they must have the same data inside
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            name_label
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        Human-readable name of the VDI
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            name_description
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        Human-readable description of the VDI
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            is_a_snapshot
                        </code>
                    </td>
                    <td>
                        <code>
                            bool
                        </code>
                    </td>
                    <td>
                        True if the VDI is a snapshot of another VDI
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            snapshot_time
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        If is_a_snapshot is true then this is the time the snapshot was created
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            snapshot_of
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        If is_a_snapshot is true then this is the VDI which was snapshotted
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            read_only
                        </code>
                    </td>
                    <td>
                        <code>
                            bool
                        </code>
                    </td>
                    <td>
                        If true then this VDI is stored on read-only media
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            virtual_size
                        </code>
                    </td>
                    <td>
                        <code>
                            int64
                        </code>
                    </td>
                    <td>
                        Size of the VDI from the perspective of a VM (in bytes)
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            physical_utilisation
                        </code>
                    </td>
                    <td>
                        <code>
                            int64
                        </code>
                    </td>
                    <td>
                        Amount of space currently being consumed on the physical storage medium
                    </td>
                </tr>
            </table>
            <h2 id="a-5">
                type attach_info = struct  { ... }
            </h2>
            <p>
                Configuration for blkback
            </p>
            <p>
                Members:
            </p>
            <table class="table table-striped table-condensed">
                <th>
                    <td>
                        Type
                    </td>
                    <td>
                        Description
                    </td>
                </th>
                <tr>
                    <td>
                        <code>
                            uri
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        A URI which can be opened and used for I/O. For example this could reference a local block device, a remote NFS share, iSCSI LUN or RBD volume.
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            extra_headers
                        </code>
                    </td>
                    <td>
                        <code>
                            (string * string) list
                        </code>
                    </td>
                    <td>
                        Additional HTTP headers which will be provided when opening the URI. For example these could be used to pass along an authorization token.
                    </td>
                </tr>
            </table>
            <h2 id="a-6">
                type query_result = struct  { ... }
            </h2>
            <p>
                properties of this implementation
            </p>
            <p>
                Members:
            </p>
            <table class="table table-striped table-condensed">
                <th>
                    <td>
                        Type
                    </td>
                    <td>
                        Description
                    </td>
                </th>
                <tr>
                    <td>
                        <code>
                            driver
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        driver, used in the XenAPI as SR.type
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            name
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        short name
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            description
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        description
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            vendor
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        entity (e.g. company, project, group) which produced this implementation
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            copyright
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        copyright
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            version
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        version
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            required_api_version
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        minimum required API version
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            features
                        </code>
                    </td>
                    <td>
                        <code>
                            string list
                        </code>
                    </td>
                    <td>
                        features supported by this plugin
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            configuration
                        </code>
                    </td>
                    <td>
                        <code>
                            (string * string) list
                        </code>
                    </td>
                    <td>
                        key/description pairs describing required device_config parameters
                    </td>
                </tr>
            </table>
            <h2 id="a-Query">
                Query
            </h2>
            <p>
                Discover properties of this implementation. Every implementation must support the query interface or it will not be recognised as a storage manager by xapi.
            </p>
            <h3 id="a-query">
                query
            </h3>
            <p>
                Query this implementation and return its properties. This is called by xapi to determine whether it is compatible with xapi and to discover the supported features.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-query" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-query" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-query" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-query" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-query" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-query" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-query">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                query_result
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-6">
                                    query_result
                                </a>
                            </code>
                        </td>
                        <td>
                            The properies of this implementation
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-query">
            <pre class="prettyprint">
                &lt;method name=&quot;query&quot;&gt;
    &lt;tp:docstring&gt;
        Query this implementation and return its properties. This is called by xapi to determine whether it is compatible with xapi and to discover the supported features.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(sssssssasa{ss})&quot; name=&quot;query_result&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            The properies of this implementation
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-query">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlc35c5bocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">Query_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.query ~dbg:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-query">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml6f32f7ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Query_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Query_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> query x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">Query</span>.<span style="color:#0033cc">Query</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ driver = <span style="color:#aa4444">"string"</span>; name = <span style="color:#aa4444">"string"</span>; description = <span style="color:#aa4444">"string"</span>; vendor = <span style="color:#aa4444">"string"</span>; copyright = <span style="color:#aa4444">"string"</span>; version = <span style="color:#aa4444">"string"</span>; required_api_version = <span style="color:#aa4444">"string"</span>; features = [ <span style="color:#aa4444">"string"</span>; <span style="color:#aa4444">"string"</span> ]; configuration = [ (<span style="color:#aa4444">"string"</span>, <span style="color:#aa4444">"string"</span>) ] })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-query">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.Query.query({ dbg: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-query">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class Query_myimplementation(Query_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def query(self, dbg):
        &quot;&quot;&quot;Discover properties of this implementation. Every implementation must support the query interface or it will not be recognised as a storage manager by xapi.&quot;&quot;&quot;
        result = {}
        result[&quot;query_result&quot;] = { &quot;driver&quot;: &quot;string&quot;, &quot;name&quot;: &quot;string&quot;, &quot;description&quot;: &quot;string&quot;, &quot;vendor&quot;: &quot;string&quot;, &quot;copyright&quot;: &quot;string&quot;, &quot;version&quot;: &quot;string&quot;, &quot;required_api_version&quot;: &quot;string&quot;, &quot;features&quot;: [ &quot;string&quot;, &quot;string&quot; ], &quot;configuration&quot;: { &quot;string&quot;: &quot;string&quot; } }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-diagnostics">
                diagnostics
            </h3>
            <p>
                Returns a printable set of backend diagnostic information.Implementations are encouraged to include any data which will be useful to diagnose problems. Note this data should not include personally-identifiable data as it is intended to be automatically included in bug reports.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-diagnostics" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-diagnostics" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-diagnostics" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-diagnostics" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-diagnostics" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-diagnostics" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-diagnostics">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                diagnostics
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            A string containing loggable human-readable diagnostics information
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-diagnostics">
            <pre class="prettyprint">
                &lt;method name=&quot;diagnostics&quot;&gt;
    &lt;tp:docstring&gt;
        Returns a printable set of backend diagnostic information.Implementations are encouraged to include any data which will be useful to diagnose problems. Note this data should not include personally-identifiable data as it is intended to be automatically included in bug reports.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;diagnostics&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            A string containing loggable human-readable diagnostics information
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-diagnostics">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml518183ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">Query_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.diagnostics ~dbg:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-diagnostics">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml7f1fb3ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Query_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Query_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> diagnostics x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">Query</span>.<span style="color:#0033cc">Diagnostics</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.(<span style="color:#aa4444">"string"</span>)))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-diagnostics">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.Query.diagnostics({ dbg: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-diagnostics">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class Query_myimplementation(Query_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def diagnostics(self, dbg):
        &quot;&quot;&quot;Discover properties of this implementation. Every implementation must support the query interface or it will not be recognised as a storage manager by xapi.&quot;&quot;&quot;
        result = {}
        result[&quot;diagnostics&quot;] = &quot;string&quot;
        return result
    # ...
            </pre>

            </div>
          </div>
            <h2 id="a-VDI">
                VDI
            </h2>
            <p>
                Operations which operate on Virtual Disk Images
            </p>
            <h3 id="a-create">
                create
            </h3>
            <p>
                [create task sr vdi_info params] creates a new VDI in [sr] using [vdi_info]. Some fields in the [vdi_info] may be modified (e.g. rounded up), so the function returns the vdi_info which was used.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-create" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-create" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-create" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-create" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-create" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-create" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-create">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi_info
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image properties
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                new_vdi
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            The created Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-create">
            <pre class="prettyprint">
                &lt;method name=&quot;create&quot;&gt;
    &lt;tp:docstring&gt;
        [create task sr vdi_info params] creates a new VDI in [sr] using [vdi_info]. Some fields in the [vdi_info] may be modified (e.g. rounded up), so the function returns the vdi_info which was used.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;vdi_info&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image properties
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;new_vdi&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            The created Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-create">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamla588fbocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.create ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi_info:{ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> };;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-create">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml204c26ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> create x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Create</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-create">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.create({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi_info: { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L } })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-create">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def create(self, dbg, sr, vdi_info):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;new_vdi&quot;] = { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-snapshot">
                snapshot
            </h3>
            <p>
                [snapshot task sr vdi_info] creates a new VDI which is a snapshot of [vdi_info.vdi] in [sr]
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-snapshot" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-snapshot" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-snapshot" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-snapshot" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-snapshot" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-snapshot" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-snapshot">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi_info
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image properties
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                new_vdi
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            [snapshot task sr vdi_info params] creates a new VDI which is a snapshot of [vdi_info.vdi] in [sr]
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-snapshot">
            <pre class="prettyprint">
                &lt;method name=&quot;snapshot&quot;&gt;
    &lt;tp:docstring&gt;
        [snapshot task sr vdi_info] creates a new VDI which is a snapshot of [vdi_info.vdi] in [sr]
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;vdi_info&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image properties
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;new_vdi&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            [snapshot task sr vdi_info params] creates a new VDI which is a snapshot of [vdi_info.vdi] in [sr]
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-snapshot">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml797c5bocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.snapshot ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi_info:{ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> };;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-snapshot">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlb97476ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> snapshot x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Snapshot</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-snapshot">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.snapshot({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi_info: { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L } })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-snapshot">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def snapshot(self, dbg, sr, vdi_info):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;new_vdi&quot;] = { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-clone">
                clone
            </h3>
            <p>
                [clone task sr vdi_info] creates a new VDI which is a clone of [vdi_info.vdi] in [sr]
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-clone" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-clone" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-clone" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-clone" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-clone" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-clone" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-clone">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi_info
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image properties
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                new_vdi
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            [clone task sr vdi_info params] creates a new VDI which is a clone of [vdi_info.vdi] in [sr]
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-clone">
            <pre class="prettyprint">
                &lt;method name=&quot;clone&quot;&gt;
    &lt;tp:docstring&gt;
        [clone task sr vdi_info] creates a new VDI which is a clone of [vdi_info.vdi] in [sr]
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;vdi_info&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image properties
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;new_vdi&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            [clone task sr vdi_info params] creates a new VDI which is a clone of [vdi_info.vdi] in [sr]
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-clone">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml90ad19ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.clone ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi_info:{ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> };;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-clone">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml393590ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> clone x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Clone</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-clone">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.clone({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi_info: { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L } })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-clone">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def clone(self, dbg, sr, vdi_info):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;new_vdi&quot;] = { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-destroy">
                destroy
            </h3>
            <p>
                [destroy task sr vdi] removes [vdi] from [sr]
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-destroy" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-destroy" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-destroy" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-destroy" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-destroy" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-destroy" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-destroy">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-destroy">
            <pre class="prettyprint">
                &lt;method name=&quot;destroy&quot;&gt;
    &lt;tp:docstring&gt;
        [destroy task sr vdi] removes [vdi] from [sr]
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-destroy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamle76f06ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.destroy ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-destroy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamla7e20aocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> destroy x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Destroy</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-destroy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.destroy({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-destroy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def destroy(self, dbg, sr, vdi):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-stat">
                stat
            </h3>
            <p>
                [stat task sr vdi] returns metadata associated with VDI [vdi] in SR [sr].
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-stat" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-stat" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-stat" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-stat" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-stat" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-stat" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-stat">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi_info
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                            </code>
                        </td>
                        <td>
                            VDI metadata
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-stat">
            <pre class="prettyprint">
                &lt;method name=&quot;stat&quot;&gt;
    &lt;tp:docstring&gt;
        [stat task sr vdi] returns metadata associated with VDI [vdi] in SR [sr].
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(ssssbssbxx)&quot; name=&quot;vdi_info&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            VDI metadata
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-stat">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml8cfaa0ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.stat ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-stat">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlc1c757ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> stat x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Stat</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-stat">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.stat({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-stat">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def stat(self, dbg, sr, vdi):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;vdi_info&quot;] = { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-attach">
                attach
            </h3>
            <p>
                [attach task dp sr vdi read_write] returns the [params] for a given [vdi] in [sr] which can be written to if (but not necessarily only if) [read_write] is true
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-attach" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-attach" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-attach" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-attach" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-attach" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-attach" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-attach">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                dp
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            DataPath to attach this VDI for
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                read_write
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                bool
                            </code>
                        </td>
                        <td>
                            If true then the DataPath will be used read/write, false otherwise
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                device
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-5">
                                    attach_info
                                </a>
                            </code>
                        </td>
                        <td>
                            backend device configuration
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-attach">
            <pre class="prettyprint">
                &lt;method name=&quot;attach&quot;&gt;
    &lt;tp:docstring&gt;
        [attach task dp sr vdi read_write] returns the [params] for a given [vdi] in [sr] which can be written to if (but not necessarily only if) [read_write] is true
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dp&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            DataPath to attach this VDI for
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;b&quot; name=&quot;read_write&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            If true then the DataPath will be used read/write, false otherwise
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;(sa{ss})&quot; name=&quot;device&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            backend device configuration
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-attach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml36e7c3ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.attach ~dbg:<span style="color:#aa4444">"string"</span> ~dp:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span> ~read_write:true;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-attach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlaf6cfcocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> attach x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Attach</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.({ uri = <span style="color:#aa4444">"string"</span>; extra_headers = [ (<span style="color:#aa4444">"string"</span>, <span style="color:#aa4444">"string"</span>) ] })))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-attach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.attach({ dbg: &quot;string&quot;, dp: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot;, read_write: True })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-attach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def attach(self, dbg, dp, sr, vdi, read_write):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;device&quot;] = { &quot;uri&quot;: &quot;string&quot;, &quot;extra_headers&quot;: { &quot;string&quot;: &quot;string&quot; } }
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-activate">
                activate
            </h3>
            <p>
                [activate task dp sr vdi] signals the desire to immediately use [vdi]. This client must have called [attach] on the [vdi] first.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-activate" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-activate" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-activate" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-activate" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-activate" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-activate" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-activate">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                dp
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            DataPath to attach this VDI for
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-activate">
            <pre class="prettyprint">
                &lt;method name=&quot;activate&quot;&gt;
    &lt;tp:docstring&gt;
        [activate task dp sr vdi] signals the desire to immediately use [vdi]. This client must have called [attach] on the [vdi] first.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dp&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            DataPath to attach this VDI for
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-activate">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlcb43f2ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.activate ~dbg:<span style="color:#aa4444">"string"</span> ~dp:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-activate">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml38cc2docaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> activate x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Activate</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-activate">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.activate({ dbg: &quot;string&quot;, dp: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-activate">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def activate(self, dbg, dp, sr, vdi):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-deactivate">
                deactivate
            </h3>
            <p>
                [deactivate task dp sr vdi] signals that this client has stopped reading (and writing) [vdi].
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-deactivate" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-deactivate" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-deactivate" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-deactivate" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-deactivate" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-deactivate" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-deactivate">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                dp
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            DataPath to deactivate
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-deactivate">
            <pre class="prettyprint">
                &lt;method name=&quot;deactivate&quot;&gt;
    &lt;tp:docstring&gt;
        [deactivate task dp sr vdi] signals that this client has stopped reading (and writing) [vdi].
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dp&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            DataPath to deactivate
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-deactivate">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml4da8c4ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.deactivate ~dbg:<span style="color:#aa4444">"string"</span> ~dp:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-deactivate">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml1f0bf8ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> deactivate x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Deactivate</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-deactivate">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.deactivate({ dbg: &quot;string&quot;, dp: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-deactivate">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def deactivate(self, dbg, dp, sr, vdi):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-detach">
                detach
            </h3>
            <p>
                [detach task dp sr vdi] signals that this client no-longer needs the [params] to be valid.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-detach" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-detach" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-detach" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-detach" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-detach" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-detach" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-detach">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                dp
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            DataPath to detach
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-detach">
            <pre class="prettyprint">
                &lt;method name=&quot;detach&quot;&gt;
    &lt;tp:docstring&gt;
        [detach task dp sr vdi] signals that this client no-longer needs the [params] to be valid.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dp&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            DataPath to detach
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-detach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml43308docaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.detach ~dbg:<span style="color:#aa4444">"string"</span> ~dp:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-detach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml760fc4ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> detach x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Detach</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-detach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.detach({ dbg: &quot;string&quot;, dp: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-detach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def detach(self, dbg, dp, sr, vdi):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-copy">
                copy
            </h3>
            <p>
                [copy task sr vdi url sr2] copies the data from [vdi] into a remote system [url]'s [sr2]
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-copy" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-copy" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-copy" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-copy" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-copy" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-copy" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-copy">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdi
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                url
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            URL which identifies a remote system
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                dest
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                new_vdi
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Virtual Disk Image
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-copy">
            <pre class="prettyprint">
                &lt;method name=&quot;copy&quot;&gt;
    &lt;tp:docstring&gt;
        [copy task sr vdi url sr2] copies the data from [vdi] into a remote system [url]'s [sr2]
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;vdi&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;url&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            URL which identifies a remote system
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dest&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;new_vdi&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            The Virtual Disk Image
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-copy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml17b590ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">VDI_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.copy ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~vdi:<span style="color:#aa4444">"string"</span> ~url:<span style="color:#aa4444">"string"</span> ~dest:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-copy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml798ddbocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">VDI_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">VDI_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> copy x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">VDI</span>.<span style="color:#0033cc">Copy</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.(<span style="color:#aa4444">"string"</span>)))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-copy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.VDI.copy({ dbg: &quot;string&quot;, sr: &quot;string&quot;, vdi: &quot;string&quot;, url: &quot;string&quot;, dest: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-copy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class VDI_myimplementation(VDI_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def copy(self, dbg, sr, vdi, url, dest):
        &quot;&quot;&quot;Operations which operate on Virtual Disk Images&quot;&quot;&quot;
        result = {}
        result[&quot;new_vdi&quot;] = &quot;string&quot;
        return result
    # ...
            </pre>

            </div>
          </div>
            <h2 id="a-SR">
                SR
            </h2>
            <p>
                Operations which act on Storage Repositories
            </p>
            <h3 id="a-ls">
                ls
            </h3>
            <p>
                [ls dbg]: returns a list of attached SRs
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-ls" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-ls" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-ls" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-ls" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-ls" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-ls" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-ls">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                srs
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                string
                                 list
                            </code>
                        </td>
                        <td>
                            The attached SRs
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-ls">
            <pre class="prettyprint">
                &lt;method name=&quot;ls&quot;&gt;
    &lt;tp:docstring&gt;
        [ls dbg]: returns a list of attached SRs
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;as&quot; name=&quot;srs&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            The attached SRs
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-ls">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml448f3eocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.ls ~dbg:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-ls">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml6169a2ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> ls x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Ls</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.([ <span style="color:#aa4444">"string"</span>; <span style="color:#aa4444">"string"</span> ])))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-ls">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.ls({ dbg: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-ls">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def ls(self, dbg):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        result[&quot;srs&quot;] = [ &quot;string&quot;, &quot;string&quot; ]
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-create">
                create
            </h3>
            <p>
                [create task sr device_config physical_size]: creates a fresh SR
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-create" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-create" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-create" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-create" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-create" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-create" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-create">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                device_config
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                (string * 
                                string
                                ) list
                            </code>
                        </td>
                        <td>
                            Host-local SR configuration (e.g. address information)
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                physical_size
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                int64
                            </code>
                        </td>
                        <td>
                            Requested maximum size of the SR (bytes)
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-create">
            <pre class="prettyprint">
                &lt;method name=&quot;create&quot;&gt;
    &lt;tp:docstring&gt;
        [create task sr device_config physical_size]: creates a fresh SR
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;a{ss}&quot; name=&quot;device_config&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Host-local SR configuration (e.g. address information)
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;x&quot; name=&quot;physical_size&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Requested maximum size of the SR (bytes)
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-create">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml2c6936ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.create ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~device_config:[ (<span style="color:#aa4444">"string"</span>, <span style="color:#aa4444">"string"</span>) ] ~physical_size:0<span style="color:#0033cc">L</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-create">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml175374ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> create x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Create</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-create">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.create({ dbg: &quot;string&quot;, sr: &quot;string&quot;, device_config: { &quot;string&quot;: &quot;string&quot; }, physical_size: 0L })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-create">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def create(self, dbg, sr, device_config, physical_size):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-attach">
                attach
            </h3>
            <p>
                [attach task sr]: attaches the SR
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-attach" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-attach" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-attach" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-attach" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-attach" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-attach" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-attach">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                device_config
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                (string * 
                                string
                                ) list
                            </code>
                        </td>
                        <td>
                            Host-local SR configuration (e.g. address information)
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-attach">
            <pre class="prettyprint">
                &lt;method name=&quot;attach&quot;&gt;
    &lt;tp:docstring&gt;
        [attach task sr]: attaches the SR
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;a{ss}&quot; name=&quot;device_config&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Host-local SR configuration (e.g. address information)
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-attach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamla76fb8ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.attach ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span> ~device_config:[ (<span style="color:#aa4444">"string"</span>, <span style="color:#aa4444">"string"</span>) ];;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-attach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlf2ecd8ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> attach x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Attach</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-attach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.attach({ dbg: &quot;string&quot;, sr: &quot;string&quot;, device_config: { &quot;string&quot;: &quot;string&quot; } })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-attach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def attach(self, dbg, sr, device_config):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-detach">
                detach
            </h3>
            <p>
                [detach task sr]: detaches the SR, first detaching and/or deactivating any active VDIs. This may fail with Sr_not_attached, or any error from VDI.detach or VDI.deactivate.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-detach" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-detach" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-detach" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-detach" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-detach" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-detach" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-detach">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-detach">
            <pre class="prettyprint">
                &lt;method name=&quot;detach&quot;&gt;
    &lt;tp:docstring&gt;
        [detach task sr]: detaches the SR, first detaching and/or deactivating any active VDIs. This may fail with Sr_not_attached, or any error from VDI.detach or VDI.deactivate.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-detach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml60c2d4ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.detach ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-detach">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml1bb5a9ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> detach x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Detach</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-detach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.detach({ dbg: &quot;string&quot;, sr: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-detach">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def detach(self, dbg, sr):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-destroy">
                destroy
            </h3>
            <p>
                [destroy sr]: destroys (i.e. makes unattachable and unprobeable) the [sr], first detaching and/or deactivating any active VDIs. This may fail with Sr_not_attached, or any error from VDI.detach or VDI.deactivate.
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-destroy" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-destroy" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-destroy" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-destroy" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-destroy" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-destroy" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-destroy">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-destroy">
            <pre class="prettyprint">
                &lt;method name=&quot;destroy&quot;&gt;
    &lt;tp:docstring&gt;
        [destroy sr]: destroys (i.e. makes unattachable and unprobeable) the [sr], first detaching and/or deactivating any active VDIs. This may fail with Sr_not_attached, or any error from VDI.detach or VDI.deactivate.
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-destroy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamlf4070cocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.destroy ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-destroy">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml57cb4cocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> destroy x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Destroy</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> ())
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-destroy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.destroy({ dbg: &quot;string&quot;, sr: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-destroy">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def destroy(self, dbg, sr):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        return result
    # ...
            </pre>

            </div>
          </div>
            <h3 id="a-scan">
                scan
            </h3>
            <p>
                [scan task sr] returns a list of VDIs contained within an attached SR
            </p>

          <ul id="tab" class="nav nav-tabs">
            <li><a href="#defn-scan" data-toggle="tab">Definition</a></li>
            <li class="active"><a href="#ocaml-scan" data-toggle="tab">ocaml client</a></li>
            <li><a href="#ocaml-server-scan" data-toggle="tab">ocaml server</a></li>
            <li><a href="#python-client-scan" data-toggle="tab">python client</a></li>
            <li><a href="#python-server-scan" data-toggle="tab">python server</a></li>
            <li><a href="#dbus-scan" data-toggle="tab">DBUS XML</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade" id="defn-scan">
            <div class="alert alert-info">
                <table class="table table-striped">
                    <th>
                        <td>
                            Direction
                        </td>
                        <td>
                            Type
                        </td>
                        <td>
                            Description
                        </td>
                    </th>
                    <tr>
                        <td>
                            <code>
                                dbg
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                <a href="#a-0">
                                    debug_info
                                </a>
                            </code>
                        </td>
                        <td>
                            Debug context from the caller
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                sr
                            </code>
                        </td>
                        <td>
                            in
                        </td>
                        <td>
                            <code>
                                string
                            </code>
                        </td>
                        <td>
                            The Storage Repository
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>
                                vdis
                            </code>
                        </td>
                        <td>
                            out
                        </td>
                        <td>
                            <code>
                                <a href="#a-4">
                                    vdi_info
                                </a>
                                 list
                            </code>
                        </td>
                        <td>
                            List of all the visible VDIs in the SR
                        </td>
                    </tr>
                </table>
            </div>

            </div>
            <div class="tab-pane fade" id="dbus-scan">
            <pre class="prettyprint">
                &lt;method name=&quot;scan&quot;&gt;
    &lt;tp:docstring&gt;
        [scan task sr] returns a list of VDIs contained within an attached SR
    &lt;/tp:docstring&gt;
    &lt;arg type=&quot;s&quot; name=&quot;dbg&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            Debug context from the caller
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;s&quot; name=&quot;sr&quot; direction=&quot;in&quot;&gt;
        &lt;tp:docstring&gt;
            The Storage Repository
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
    &lt;arg type=&quot;a(ssssbssbxx)&quot; name=&quot;vdis&quot; direction=&quot;out&quot;&gt;
        &lt;tp:docstring&gt;
            List of all the visible VDIs in the SR
        &lt;/tp:docstring&gt;
    &lt;/arg&gt;
&lt;/method&gt;

            </pre>

            </div>
            <div class="tab-pane fade in active" id="ocaml-scan">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocamldb7868ocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* these directives only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;
#require <span style="color:#aa4444">"lwt"</span>;;
#require <span style="color:#aa4444">"lwt.syntax"</span>;;
#require <span style="color:#aa4444">"rpc.unix"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">Client</span> = <span style="color:#0033cc">SR_client</span>(<span style="color:#990099">struct</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">Lwt</span>
    <span style="color:green">let</span> rpc call = return (<span style="color:#0033cc">Rpc_client</span>.do_rpc ~content_type:<span style="color:#0033cc">`</span><span style="color:#0033cc">XML</span> ~path:<span style="color:#aa4444">"/"</span> ~host:<span style="color:#aa4444">"127.0.0.1"</span> ~port:80 call) <span style="color:#990000">(* TODO: Rpc_client needs to support Lwt *)</span>
<span style="color:#990099">end</span>)

<span style="color:green">let</span> result = <span style="color:#0033cc">Client</span>.scan ~dbg:<span style="color:#aa4444">"string"</span> ~sr:<span style="color:#aa4444">"string"</span>;;</pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="ocaml-server-scan">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>
/var/folders/ml/fqqlxl6j03l2lf9ljfms9m540000gn/T/ocaml1b032cocaml</title>
  <meta name="GENERATOR" content="caml2html 1.4.3">
</head>
<body>

<pre>
<span style="color:#990000">(* this line only needed in a toplevel: *)</span>
#require <span style="color:#aa4444">"xcp-api-client"</span>;;

<span style="color:#cc9900">open</span> <span style="color:#0033cc">S</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Storage</span>
<span style="color:#cc9900">open</span> <span style="color:#0033cc">Types</span>

<span style="color:green">module</span> <span style="color:#0033cc">SR_myimplementation</span> = <span style="color:green">functor</span>(<span style="color:#0033cc">M</span>: <span style="color:#0033cc">M</span>) -&gt; <span style="color:#990099">struct</span>
    <span style="color:#990000">(* by default every operation will return a 'not implemented' exception *)</span>
    <span style="color:#cc9900">include</span> <span style="color:#0033cc">SR_skeleton</span>(<span style="color:#0033cc">M</span>)
    <span style="color:#990000">(* ... *)</span>
    <span style="color:green">let</span> scan x =
        <span style="color:green">let</span> <span style="color:#cc9900">open</span> <span style="color:#0033cc">SR</span>.<span style="color:#0033cc">Scan</span> <span style="color:green">in</span>
        return (<span style="color:#0033cc">`</span><span style="color:#0033cc">Ok</span> (<span style="color:#0033cc">Out</span>.([ { vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> }; { vdi = <span style="color:#aa4444">"string"</span>; content_id = <span style="color:#aa4444">"string"</span>; name_label = <span style="color:#aa4444">"string"</span>; name_description = <span style="color:#aa4444">"string"</span>; is_a_snapshot = true; snapshot_time = <span style="color:#aa4444">"string"</span>; snapshot_of = <span style="color:#aa4444">"string"</span>; read_only = true; virtual_size = 0<span style="color:#0033cc">L</span>; physical_utilisation = 0<span style="color:#0033cc">L</span> } ])))
    <span style="color:#990000">(* ... *)</span>
<span style="color:#990099">end</span></pre>
</body>
</html>

            </div>
            <div class="tab-pane fade" id="python-client-scan">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

if __name__ == &quot;__main__&quot;:
    c = xcp.connect()
    results = c.SR.scan({ dbg: &quot;string&quot;, sr: &quot;string&quot; })
    print (repr(results))
            </pre>

            </div>
            <div class="tab-pane fade" id="python-server-scan">
            <pre class="prettyprint lang-python">
                
import xmlrpclib
import xcp
from storage import *

class SR_myimplementation(SR_skeleton):
    # by default each method will return a Not_implemented error
    # ...
    def scan(self, dbg, sr):
        &quot;&quot;&quot;Operations which act on Storage Repositories&quot;&quot;&quot;
        result = {}
        result[&quot;vdis&quot;] = [ { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L }, { &quot;vdi&quot;: &quot;string&quot;, &quot;content_id&quot;: &quot;string&quot;, &quot;name_label&quot;: &quot;string&quot;, &quot;name_description&quot;: &quot;string&quot;, &quot;is_a_snapshot&quot;: True, &quot;snapshot_time&quot;: &quot;string&quot;, &quot;snapshot_of&quot;: &quot;string&quot;, &quot;read_only&quot;: True, &quot;virtual_size&quot;: 0L, &quot;physical_utilisation&quot;: 0L } ]
        return result
    # ...
            </pre>

            </div>
          </div>
            <h1 id="a-exceptions">
                Exceptions
            </h1>
            <table class="table table-striped table-condensed">
                <th>
                    <td>
                        Parameter Types
                    </td>
                    <td>
                        Description
                    </td>
                </th>
                <tr>
                    <td>
                        <code>
                            Sr_not_attached
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        An SR must be attached in order to access VDIs
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Vdi_does_not_exist
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        The specified VDI could not be found in the SR
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Illegal_transition
                        </code>
                    </td>
                    <td>
                        <code>
                            string * string
                        </code>
                    </td>
                    <td>
                        The requested VDI state transition is invalid
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Backend_error
                        </code>
                    </td>
                    <td>
                        <code>
                            string * string list
                        </code>
                    </td>
                    <td>
                        A backend-specific error occurred
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Unimplemented
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        The operation has not been implemented
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Does_not_exist
                        </code>
                    </td>
                    <td>
                        <code>
                            string * string
                        </code>
                    </td>
                    <td>
                        The object does not exist
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Cancelled
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        The task has been asynchronously cancelled
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Redirect
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        The request should be resent to this address
                    </td>
                </tr>
                <tr>
                    <td>
                        <code>
                            Sr_attached
                        </code>
                    </td>
                    <td>
                        <code>
                            string
                        </code>
                    </td>
                    <td>
                        The operation cannot be performed because the SR is still attached
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap-transition.js"></script>
    <script src="bootstrap/js/bootstrap-alert.js"></script>
    <script src="bootstrap/js/bootstrap-modal.js"></script>
    <script src="bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="bootstrap/js/bootstrap-tab.js"></script>
    <script src="bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap/js/bootstrap-popover.js"></script>
    <script src="bootstrap/js/bootstrap-button.js"></script>
    <script src="bootstrap/js/bootstrap-collapse.js"></script>
    <script src="bootstrap/js/bootstrap-carousel.js"></script>
    <script src="bootstrap/js/bootstrap-typeahead.js"></script>

  </body>
</html>
